<div class="container">

  <div class="jumbotron">
    <h1 class="display-4">{{ title }}</h1>
    <p class="lead text-large">Account Information</p>
  </div>

  <div *ngIf="reg_name" class="alert alert-success">
    Thank you for registering with us {{ reg_name}}. We have just sent a confirmation email at {{ reg_email }}, and we will send
    all mail to {{reg_addr}}.
    <br> Have a wonderful day!
  </div>

  <!-- {{ formData.value }} -->

  <form (submit)="formData.valid && onSubmit($event, formData)" #formData='ngForm'>

    <div>
      <label>Name:</label>
      <input name="name" type="text" minlength="3" required #name='ngModel' [(ngModel)]="user.first_name">
      <div *ngIf="name.errors && (name.touched || name.dirty) ">
        <p *ngIf="name.errors.required" class="errors">Valid first name is required</p>
        <p *ngIf="name.errors.minlength" class="errors">Must be at least {{ name.errors.minlength.requiredLength }} characters</p>
      </div>
    </div>

    <div class="form-group row">
      <label for="last_name" class="col-sm-2 col-form-label">
        *Last Name:
      </label>
      <div class="col-sm-4 ">
        <input name="last_name" type="text" class="form-control" minlength="4" maxlength="24" required #last_name='ngModel' [(ngModel)]="user.last_name"
        />
      </div>
      <div class="col-sm-6" *ngIf="last_name.errors && (last_name.touched || last_name.dirty) ">
        <p *ngIf="last_name.errors.required" class="errors">Valid last name is required</p>
        <p *ngIf="last_name.errors.minlength" class="errors">Must be at least {{ last_name.errors.minlength.requiredLength }} characters</p>
      </div>
    </div>

    <div class="form-group row">
      <label for="email" class="col-sm-2 col-form-label">
        *Email Address:
      </label>
      <div class="col-sm-4 ">
        <input name="email" type="email" class="form-control" aria-describedby="emailHelp" minlength="8" maxlength="24" pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"
          required #email='ngModel' [(ngModel)]="user.email" />
      </div>
      <div class="col-sm-6" *ngIf="email.errors && (email.touched || email.dirty)  ">
        <p *ngIf="email.errors.required" class="errors">Email is required</p>
        <p *ngIf="email.errors.minlength" class="errors">Must be at least {{ email.errors.minlength.requiredLength }} characters</p>
        <p *ngIf="email.errors.pattern" class="errors">Must be a valid email pattern</p>
      </div>
    </div>

    <div class="form-group row">
      <label for="password" class="col-sm-2 col-form-label">
        *Password:
      </label>
      <div class="col-sm-4 ">
        <input name="password" type="password" class="form-control" aria-describedby="pwdHelp" minlength="8" maxlength="15" required
          pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$" [(ngModel)]="user.password" #password='ngModel' />

      </div>
      <div class="col-sm-6" *ngIf="password.errors && (password.touched || password.dirty) ">
        <p *ngIf="password.errors.required" class="errors">Password is required</p>
        <p *ngIf="password.errors.minlength" class="errors">Must be at least {{ password.errors.minlength.requiredLength }} characters</p>
        <p *ngIf="password.errors.pattern" class="errors">Must include a letter and a number</p>
      </div>
    </div>

    <div class="form-group row">
      <label for="password_confirm" class="col-sm-2 col-form-label">
        *Password Confirmation:
      </label>
      <div class="col-sm-4 ">
        <input name="password_confirm" type="password" required [pattern]='password.value' class="form-control" aria-describedby="pwdHelp2"
          [(ngModel)]="user.password_confirm" #password_confirm='ngModel' />

      </div>

      <div class="col-sm-6" *ngIf="password_confirm.errors && (password_confirm.touched || password_confirm.dirty )  ">
        <p *ngIf="password_confirm.errors.pattern" class="errors">Must match password</p>
      </div>
    </div>

    <div class="form-group row">
      <label for="streetaddr1" class="col-sm-2 col-form-label">
        *Street Address:
      </label>
      <div class="col-sm-4 ">
        <input name="streetaddr1" type="text" class="form-control" minlength="4" maxlength="24" required [(ngModel)]="user.streetaddr1"
          #streetaddr1='ngModel' />
      </div>
      <div class="col-sm-6" *ngIf="streetaddr1.errors && (streetaddr1.touched || streetaddr1.dirty)  ">
        <p *ngIf="streetaddr1.errors.required" class="errors">Street address is required</p>
        <p *ngIf="streetaddr1.errors.minlength" class="errors">Must be at least {{ streetaddr1.errors.minlength.requiredLength }} characters</p>
      </div>
    </div>

    <div class="form-group row">
      <label for="streetaddr2" class="col-sm-2 col-form-label">
        Unit/Apartment #:
      </label>
      <div class="col-sm-4 ">
        <input name="streetaddr2" type="text" class="form-control" minlength="2" maxlength="24" [(ngModel)]="user.streetaddr2" #streetaddr2='ngModel'
        />
      </div>
      <div class="col-sm-6" *ngIf="streetaddr2.errors && (streetaddr2.touched || streetaddr2.dirty) ">
        <p *ngIf="streetaddr2.errors.minlength" class="errors">Must be at least {{ streetaddr2.errors.minlength.requiredLength }} characters, if used</p>
      </div>
    </div>

    <div class="form-group row">
      <label for="city" class="col-sm-2 col-form-label">
        *City:
      </label>
      <div class="col-sm-4 ">
        <input name="city" type="text" class="form-control" minlength="3" maxlength="24" required [(ngModel)]="user.city" #city='ngModel'
        />
      </div>
      <div class="col-sm-6" *ngIf="city.errors && (city.touched || city.dirty)  ">
        <p *ngIf="city.errors.required" class="errors">City is required</p>
        <p *ngIf="city.errors.minlength" class="errors">Must be at least {{ city.errors.minlength.requiredLength }} characters</p>
      </div>
    </div>

    <div class="form-group row">
      <label for="state" class="col-sm-2 col-form-label">
        *State:
      </label>

      <div class="col-sm-4 ">
        <select name="state" type="text" class="form-control" required [(ngModel)]="user.state" #state='ngModel'>
          <option value="AL">Alabama</option>
          <option value="AK">Alaska</option>
          <option value="AZ">Arizona</option>
          <option value="AR">Arkansas</option>
          <option value="CA">California</option>
          <option value="CO">Colorado</option>
          <option value="CT">Connecticut</option>
          <option value="DE">Delaware</option>
          <option value="DC">District Of Columbia</option>
          <option value="FL">Florida</option>
          <option value="GA">Georgia</option>
          <option value="HI">Hawaii</option>
          <option value="ID">Idaho</option>
          <option value="IL">Illinois</option>
          <option value="IN">Indiana</option>
          <option value="IA">Iowa</option>
          <option value="KS">Kansas</option>
          <option value="KY">Kentucky</option>
          <option value="LA">Louisiana</option>
          <option value="ME">Maine</option>
          <option value="MD">Maryland</option>
          <option value="MA">Massachusetts</option>
          <option value="MI">Michigan</option>
          <option value="MN">Minnesota</option>
          <option value="MS">Mississippi</option>
          <option value="MO">Missouri</option>
          <option value="MT">Montana</option>
          <option value="NE">Nebraska</option>
          <option value="NV">Nevada</option>
          <option value="NH">New Hampshire</option>
          <option value="NJ">New Jersey</option>
          <option value="NM">New Mexico</option>
          <option value="NY">New York</option>
          <option value="NC">North Carolina</option>
          <option value="ND">North Dakota</option>
          <option value="OH">Ohio</option>
          <option value="OK">Oklahoma</option>
          <option value="OR">Oregon</option>
          <option value="PA">Pennsylvania</option>
          <option value="RI">Rhode Island</option>
          <option value="SC">South Carolina</option>
          <option value="SD">South Dakota</option>
          <option value="TN">Tennessee</option>
          <option value="TX">Texas</option>
          <option value="UT">Utah</option>
          <option value="VT">Vermont</option>
          <option value="VA">Virginia</option>
          <option value="WA">Washington</option>
          <option value="WV">West Virginia</option>
          <option value="WI">Wisconsin</option>
          <option value="WY">Wyoming</option>
        </select>
      </div>
      <div class="col-sm-6" *ngIf="state.errors && (state.touched || state.dirty)  ">
        <p *ngIf="state.errors.required" class="errors">State is required</p>
      </div>
    </div>

    <div class="form-group row">
      <label for="lucky" class="col-sm-2 col-form-label">
        *Feeling lucky?
      </label>

      <div class="form-group">
        <div class="radio">
          <label class="radio-block control-label">
            <input type="radio" name="lucky" value="yes" required #lucky='ngModel' [(ngModel)]="user.lucky"> Yes
          </label>
        </div>
      </div>

      <div class="form-group">
        <div class="radio">
          <label class="radio-block control-label ml-5">
            <input type="radio" name="lucky" value="no" required #lucky='ngModel' [(ngModel)]="user.lucky"> No
          </label>
        </div>
      </div>
      <div class="col-sm-6" *ngIf="lucky.errors && (lucky.touched || lucky.dirty)  ">
        <p *ngIf="lucky.errors.required" class="errors">You must select an option</p>
      </div>
    </div>

    <p *ngIf='formData.invalid && formData.dirty' class='errors'> You can submit after entering all required fields and fixing any errors above</p>
    <button [disabled]='formData.invalid' class="btn btn-primary">
      Register
    </button>

  </form>
  <hr class='mt-5'>
</div>
